<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0,viewport-fit=cover">
  <title>Winn LIFF app</title>
</head>
<body>

  <script src="https://static.line-scdn.net/liff/edge/versions/2.5.0/sdk.js"></script>
  <script>
    var url_string = window.location.href;
    url_string = url_string.replace("liff.state=%3F","");
    url_string = url_string.replaceAll("%3D","=");
    url_string = url_string.replaceAll("%253A",":");
    url_string = url_string.replaceAll("%252F","/");
    var url = new URL(url_string);
    var aurl = url.searchParams.get("audiourl");
    var iurl = url.searchParams.get("imageurl");

    var title = url.searchParams.get("title");
    var surl = "https://liff.line.me/1656656612-7DmnEE4l?audiourl=" + aurl + "&imageurl=" + iurl + "&title=" + title;
    var laurl = "https://liff.line.me/1656651596-mJ6rzM1G?audiourl=" + aurl;

    async function main() {
      await liff.init({ liffId: "1656656612-7DmnEE4l" })
      // if (liff.isLoggedIn()) {
      //     // Login แล้วจ้า
      // } else {
      //   liff.login()
      // }

      var flex = {
        "type":"flex",
        "altText":"This is a Flex Message",
        "contents":
          {
  "type": "bubble",
  "footer": {
    "contents": [
      {
        "action": {
          "label": "play",
          "type": "uri",
          "uri": "https://liff.line.me/1656651596-mJ6rzM1G?audiourl=https://botnoi-dictionary.s3.amazonaws.com:443/3d61b5655c246bee979245629fd03892b8e314addd48c4bd07d1f416978a8e93_11192021070021.mp3"
        },
        "height": "sm",
        "style": "link",
        "type": "button"
      },
      {
        "action": {
          "label": "share",
          "type": "uri",
          "uri": "https://liff.line.me/1656656612-7DmnEE4l"
        },
        "height": "sm",
        "style": "link",
        "type": "button"
      },
      {
        "size": "sm",
        "type": "spacer"
      }
    ],
    "flex": 0,
    "layout": "horizontal",
    "spacing": "sm",
    "type": "box"
  }
}

        }

      var stext = {
        "type":"text",
        "text":JSON.stringify(flex)
      }




      await liff.shareTargetPicker([stext,flex
        
        ])
      liff.closeWindow()
    }
    main()
  </script>

</body>
</html>
